const m={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"};function c(n){const[t,e]=n.split(":").map(Number);return{hours:t,minutes:e}}function f(n,t,e,s){const r=c(e),u=c(s),o=n*60+t,i=r.hours*60+r.minutes,a=u.hours*60+u.minutes;return a<i?o>=i||o<a:o>=i&&o<a}function d(n,t=new Date){if(!n.enabled)return!1;const e=m[t.getDay()];if(!n.days.includes(e))return!1;const s=t.getHours(),r=t.getMinutes();return f(s,r,n.startTime,n.endTime)}function h(n,t=new Date){return n.find(e=>d(e,t))??null}function T(n,t=new Date){const e=c(n.endTime),s=t.getHours(),r=t.getMinutes();let u=e.hours*60+e.minutes;const o=s*60+r;u<c(n.startTime).hours*60+c(n.startTime).minutes&&o>u&&(u+=1440);const i=u-o;if(i<=0)return"ending soon";const a=Math.floor(i/60),l=i%60;return a>0?`${a}h ${l}m`:`${l}m`}function g(n){const t=c(n.endTime),e=t.hours%12||12,s=t.hours>=12?"PM":"AM",r=t.minutes.toString().padStart(2,"0");return`${e}:${r} ${s}`}function M(n,t=new Date){const{blockState:e,schedules:s}=n;if(e.pausedUntil&&t.getTime()<e.pausedUntil)return{shouldBlock:!1};if(e.manualOverride==="on")return{shouldBlock:!0,reason:"Manual block active"};if(e.manualOverride==="off")return{shouldBlock:!1};const r=h(s,t);return r?{shouldBlock:!0,reason:r.name,timeRemaining:T(r,t)}:{shouldBlock:!1}}export{g as f,h as g,M as s};

import{c as p,r as d,j as e,a as u,P as C,R as E,b as M}from"./chunks/index-DA0Dt8Zm.js";import{g as k,s as _}from"./chunks/storage-DpxcWYbS.js";import{s as A,g as L,f as R}from"./chunks/schedule-CZeAsn2e.js";const T=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],h=p("clock",T);const U=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],B=p("pause",U);const O=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],D=p("play",O);const P=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v=p("settings",P),j=3;function I(){const[s,r]=d.useState(null),[o,i]=d.useState(!1);if(d.useEffect(()=>(k().then(r),_(r)),[]),!s)return e.jsx("div",{className:"w-[340px] h-[420px] bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})});const m=A(s),n=L(s.schedules),x=s.blockState.pausedUntil&&Date.now()<s.blockState.pausedUntil;let t="inactive",c="Blocking inactive",l="No schedule active";if(x){t="paused";const a=new Date(s.blockState.pausedUntil);c="Paused",l=`Until ${a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`}else s.blockState.manualOverride==="on"?(t="active",c="Blocking active",l="Manual block enabled"):s.blockState.manualOverride==="off"?(t="inactive",c="Blocking disabled",l="Manual override"):m.shouldBlock&&n&&(t="active",c="Blocking active",l=`${n.name} â€¢ until ${R(n)}`);const f=j-s.bypassState.quickBypassesUsed,w=async()=>{const a=t==="active"?"off":"on";await chrome.runtime.sendMessage({type:"TOGGLE_MANUAL_OVERRIDE",state:a})},g=async a=>{if(a===null)await chrome.runtime.sendMessage({type:"TOGGLE_MANUAL_OVERRIDE",state:"off"});else{const S=Date.now()+a;await chrome.runtime.sendMessage({type:"PAUSE_BLOCKING",until:S})}i(!1)},N=async()=>{await chrome.runtime.sendMessage({type:"TOGGLE_MANUAL_OVERRIDE",state:null})},y=()=>{chrome.tabs.create({url:chrome.runtime.getURL("settings.html")})};return e.jsxs("div",{className:"w-[340px] bg-background text-foreground overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 opacity-[0.02] pointer-events-none bg-[url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noise%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noise)%22/%3E%3C/svg%3E')]"}),e.jsxs("div",{className:"relative px-4 pt-4 pb-3 flex items-center justify-between border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{viewBox:"0 0 64 64",fill:"none",className:"w-6 h-6 text-primary",children:[e.jsx("path",{d:"M12 32C12 32 16 28 24 28C32 28 36 32 36 32",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M36 26V38",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M36 32H48C50 32 52 30 52 28V36C52 34 50 32 48 32",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"48",cy:"32",r:"4",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M8 30V34",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:"M4 28V36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("h1",{className:"font-serif text-lg font-medium tracking-wide text-primary",children:"Sordino"})]}),e.jsx("button",{onClick:y,className:"p-2 rounded-lg hover:bg-secondary/50 transition-colors text-muted-foreground hover:text-foreground",children:e.jsx(v,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:u("relative rounded-xl p-5 border transition-all duration-300",t==="active"&&"bg-primary/10 border-primary/30",t==="paused"&&"bg-yellow-500/10 border-yellow-500/30",t==="inactive"&&"bg-secondary/50 border-border"),children:[t==="active"&&e.jsx("div",{className:"absolute inset-0 rounded-xl bg-primary/5 blur-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:u("w-2.5 h-2.5 rounded-full",t==="active"&&"bg-primary animate-pulse",t==="paused"&&"bg-yellow-500",t==="inactive"&&"bg-muted-foreground")}),e.jsx("span",{className:u("text-sm font-medium uppercase tracking-wider",t==="active"&&"text-primary",t==="paused"&&"text-yellow-500",t==="inactive"&&"text-muted-foreground"),children:c})]})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l}),e.jsxs("div",{className:"flex gap-2",children:[t==="active"&&e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("button",{onClick:()=>i(!o),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-secondary hover:bg-secondary/80 text-foreground text-sm font-medium transition-colors",children:[e.jsx(B,{className:"w-4 h-4"}),"Pause"]}),o&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-card border border-border rounded-lg shadow-xl z-10 overflow-hidden",children:[e.jsxs("button",{onClick:()=>g(900*1e3),className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary/50 transition-colors flex items-center gap-2",children:[e.jsx(h,{className:"w-3.5 h-3.5 text-muted-foreground"}),"15 minutes"]}),e.jsxs("button",{onClick:()=>g(3600*1e3),className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary/50 transition-colors flex items-center gap-2",children:[e.jsx(h,{className:"w-3.5 h-3.5 text-muted-foreground"}),"1 hour"]}),e.jsxs("button",{onClick:()=>g(G()),className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary/50 transition-colors flex items-center gap-2",children:[e.jsx(h,{className:"w-3.5 h-3.5 text-muted-foreground"}),"Until tomorrow"]}),e.jsx("div",{className:"border-t border-border"}),e.jsx("button",{onClick:()=>g(null),className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary/50 transition-colors text-muted-foreground",children:"Until I turn it back on"})]})]}),(t==="paused"||t==="inactive")&&e.jsxs("button",{onClick:t==="paused"?N:w,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground text-sm font-medium transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),t==="paused"?"Resume":"Start Blocking"]})]})]})]})}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground mb-3",children:"Today"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(b,{value:s.stats.blocksTriggered,label:"blocked"}),e.jsx(b,{value:s.stats.bypassesUsed,label:"bypasses"}),e.jsx(b,{value:`${f}/${j}`,label:"remaining",highlight:f===0})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{}),e.jsxs("button",{onClick:y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-border hover:bg-secondary/50 text-sm font-medium transition-colors",children:[e.jsx(v,{className:"w-4 h-4"}),"Settings"]})]})})]})}function b({value:s,label:r,highlight:o}){return e.jsxs("div",{className:u("rounded-lg p-3 text-center border",o?"bg-destructive/10 border-destructive/30":"bg-secondary/30 border-border/50"),children:[e.jsx("p",{className:u("text-xl font-semibold font-serif",o?"text-destructive":"text-foreground"),children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})}function $(){const[s,r]=d.useState(!1),[o,i]=d.useState(""),m=async()=>{if(!o.trim())return;const n=o.trim().replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],x=await k(),t={...x,customSites:[...x.customSites,n]};await chrome.storage.local.set({sordino_settings:t}),i(""),r(!1)};return s?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:n=>i(n.target.value),onKeyDown:n=>n.key==="Enter"&&m(),placeholder:"example.com",className:"flex-1 px-3 py-2.5 rounded-lg bg-secondary border border-border text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50",autoFocus:!0}),e.jsx("button",{onClick:m,className:"px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:"Add"}),e.jsx("button",{onClick:()=>{r(!1),i("")},className:"px-3 py-2.5 rounded-lg border border-border hover:bg-secondary/50 text-sm transition-colors",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>r(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-border hover:bg-secondary/50 text-sm font-medium transition-colors",children:[e.jsx(C,{className:"w-4 h-4"}),"Add site"]})}function G(){const s=new Date,r=new Date(s);return r.setDate(r.getDate()+1),r.setHours(0,0,0,0),r.getTime()-s.getTime()}E.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(I,{})}));
